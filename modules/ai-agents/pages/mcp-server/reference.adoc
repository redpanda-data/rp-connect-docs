= MCP Tool Configuration Reference
:description: Reference documentation for MCP tool configuration, YAML rules, secrets, and tags.
:page-topic-type: reference
:personas: ai_agent_developer, streaming_platform_developer, platform_engineer_sre
// Reader journey: "I need to check the spec"
// Learning objectives - what readers can do with this reference:
:learning-objective-1: pass:q[Look up required and optional fields in the `meta.mcp` block]
:learning-objective-2: Find the YAML structure rules for each component type
:learning-objective-3: Identify which properties are restricted by component type
:learning-objective-4: Find the syntax for referencing secrets and environment variables
:learning-objective-5: Use tags to filter which tools are included in an MCP server
:learning-objective-6: Find the project directory structure for MCP server projects

This page provides reference documentation for building and configuring MCP tools in Redpanda Connect.

Use this reference to:

* [ ] {learning-objective-1}
* [ ] {learning-objective-2}
* [ ] {learning-objective-3}
* [ ] {learning-objective-4}
* [ ] {learning-objective-5}
* [ ] {learning-objective-6}

TIP: For best practices, debugging tips, and common mistakes to avoid, see the xref:ai-agents:mcp-server/best-practices.adoc[].

[[contract]]
== Tool contract and MCP metadata

// Tool contract guidance - single-sourced from partial
include::ai-agents:partial$mcp/tool-contract-guidance.adoc[]

[[yaml-rules]]
== YAML configuration rules

// YAML configuration rules - single-sourced from partial
include::ai-agents:partial$mcp/yaml-config-rules-connect.adoc[]

[[property-restrictions]]
== Property restrictions by component type

// Property restrictions table - single-sourced from partial
include::ai-agents:partial$mcp/property-restrictions-table.adoc[]

[[secrets]]
== Secrets and environment variables

Reference secrets and configuration values using environment variable interpolation:

[,yaml]
----
http:
  url: "https://api.example.com/data"
  headers:
    Authorization: "Bearer ${API_TOKEN}"
----

Set environment variables before starting the MCP server:

[,bash]
----
export API_TOKEN="your-secret-token"
rpk connect mcp-server start
----

Use uppercase snake_case for environment variable names (for example, `API_TOKEN`, `DATABASE_URL`).

[[tags]]
== Tags

Tags filter which tools are included when starting the server. Define tags as a list of strings in the `meta.mcp` block:

[,yaml]
----
meta:
  mcp:
    tags:
      - weather
      - external-api
----

Filter tools when starting the server:

[,bash]
----
rpk connect mcp-server start --tags weather
----

Only tools with matching tags are included. Tools without matching tags are excluded.

For tag strategies and usage patterns, see xref:ai-agents:mcp-server/best-practices.adoc#tags[Best practices].

[[directory-structure]]
== Project directory structure

When you initialize an MCP server project with `rpk connect mcp-server init`, it creates this structure:

[.no-copy]
----
├── o11y
│   ├── metrics.yaml
│   └── tracer.yaml
└── resources
    ├── caches
    │   └── example-cache.yaml
    ├── inputs
    │   └── example-input.yaml
    ├── outputs
    │   └── example-output.yaml
    └── processors
        └── example-processor.yaml
----

Each directory corresponds to a component type:

[cols="1,1", options="header"]
|===
| Directory | Component Type

| `resources/inputs/`
| Input component

| `resources/outputs/`
| Output component

| `resources/processors/`
| Processor component

| `resources/caches/`
| Cache component
|===

The `o11y` directory contains configuration for observability, including metrics and tracing.

== Next steps

Continue your learning journey with these resources:

* xref:ai-agents:mcp-server/best-practices.adoc[]: Learn input validation, error handling, and response formatting
* xref:ai-agents:mcp-server/tool-patterns.adoc[]: Find reusable patterns for common scenarios
* xref:ai-agents:mcp-server/troubleshooting.adoc[]: Diagnose and fix common issues
* xref:components:about.adoc[Redpanda Connect components reference]
* xref:guides:bloblang/about.adoc[Bloblang language guide]
* link:https://docs.anthropic.com/en/docs/mcp[Model Context Protocol documentation^]
