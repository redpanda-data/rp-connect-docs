// =============================================================================
// PARTIAL: secrets-management.adoc
// =============================================================================
//
// INCLUDED BY:
//   - rp-connect-docs: modules/ai-agents/pages/mcp-server/best-practices.adoc
//   - cloud-docs: modules/ai-agents/pages/mcp/remote/best-practices.adoc
//
// INCLUDE SYNTAX:
//   Connect: include::ai-agents:partial$mcp/best-practices/secrets-management.adoc[]
//   Cloud:   include::redpanda-connect:ai-agents:partial$mcp/best-practices/secrets-management.adoc[]
//
// ATTRIBUTES USED:
//   - env-cloud: Switches secrets syntax and instructions for Cloud vs self-managed
//
// DEPENDENCIES:
//   None
// =============================================================================

ifdef::env-cloud[]
Store all credentials and sensitive values in the Redpanda Cloud xref:develop:connect/configuration/secret-management.adoc[Secrets Store], then reference them using `${secrets.NAME}` syntax.

[source,yaml]
----
http:
  url: "https://api.example.com/data"
  headers:
    Authorization: "Bearer ${secrets.API_TOKEN}"  # Injected at runtime
----

When you reference secrets in your tool's YAML configuration, the Cloud Console automatically detects these references and provides an interface to create the secrets inline.

=== Secrets best practices

* Never commit secrets to Git or hardcode them in configuration files.
* Use uppercase snake_case for secret names (for example, `DATAPLANE_TOKEN`).
* Rotate secrets in the Secrets Store periodically.
* Follow the principle of least privilege. Only request the scopes and roles your tool actually needs.

For syntax details, see xref:ai-agents:mcp/remote/create-tool.adoc#secrets[Create a tool: Secrets].
endif::[]

ifndef::env-cloud[]
Never hardcode API keys or credentials. Reference secrets using environment variable interpolation (`$\{API_TOKEN}`).

[source,yaml]
----
http:
  url: "https://api.example.com/data"
  headers:
    Authorization: "Bearer ${API_TOKEN}"  # Injected at runtime
----

Use uppercase snake_case for environment variable names. Set them before starting the MCP server:

[source,bash]
----
export API_TOKEN="your-api-key"
rpk connect mcp-server --tag my-tools
----
endif::[]
