// Single-sourced partial for MCP configuration examples
// Shows correct and incorrect ways to structure MCP tool configurations
//
// Include from Connect: include::ai-agents:partial$mcp/config-examples.adoc[]
// Include from Cloud: include::redpanda-connect:ai-agents:partial$mcp/config-examples.adoc[]

=== Configuration examples

.Correct example
[source,yaml]
----
label: event-reader
redpanda:
ifdef::env-cloud[]
  seed_brokers: [ "${secrets.REDPANDA_BROKERS}" ]
endif::[]
ifndef::env-cloud[]
  seed_brokers: [ "${REDPANDA_BROKERS}" ]
endif::[]
  topics: [ "events" ]
  consumer_group: "mcp-reader"

meta:
  mcp:
    enabled: true
    description: "Consume events from Redpanda"
----

.Correct example (processor component)
[source,yaml]
----
label: fetch-example-data
processors:
  - label: safe_operation
    try:
      - http:
          url: "https://api.example.com/data"
          timeout: "10s"
      - mutation: |
          root = this.merge({"processed": true})

  - label: handle_errors
    catch:
      - mutation: |
          root = {
            "error": "Operation failed",
            "details": error()
          }
----

.Correct example (output with processors)
[source,yaml]
----
label: publish-with-transform
processors:  # <1>
  - mutation: |
      root = this
      root.published_at = now()
redpanda:
ifdef::env-cloud[]
  seed_brokers: [ "${secrets.REDPANDA_BROKERS}" ]
endif::[]
ifndef::env-cloud[]
  seed_brokers: [ "${REDPANDA_BROKERS}" ]
endif::[]
  topic: "processed-events"
meta:
  mcp:
    enabled: true
    description: "Publish data to Redpanda with timestamp"
----
<1> Processors within an output are allowed and transform data before publishing.

.Incorrect (do not include the input wrapper)
[source,yaml]
----
label: incorrect-example
input:
  redpanda:
ifdef::env-cloud[]
    seed_brokers: [ "${secrets.REDPANDA_BROKERS}" ]
endif::[]
ifndef::env-cloud[]
    seed_brokers: [ "${REDPANDA_BROKERS}" ]
endif::[]
    topics: [ "events" ]
----

.Incorrect (multiple top-level component types in one file)
[source,yaml]
----
label: incorrect-example
input:  # <1>
  redpanda: { ... }
processors:  # <1>
  - mutation: { ... }
output:  # <1>
  redpanda: { ... }
----
<1> This file has three top-level component types. Each must be in its own file.
