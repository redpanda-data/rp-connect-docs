// Single-sourced partial for Cloud-specific YAML configuration rules
// This version describes component types without directory structure (managed in Cloud UI)
//
// Include from Cloud: include::redpanda-connect:ai-agents:partial$mcp/yaml-config-rules-cloud.adoc[]

Each tool configuration should contain exactly one component type. The component type is inferred from the type you select when creating or editing the MCP server. Valid component types are:

* xref:develop:connect/components/inputs/about.adoc[`input`] (for data sources)
* xref:develop:connect/components/outputs/about.adoc[`output`] (for data sinks)
* xref:develop:connect/components/processors/about.adoc[`processor`] (for data transformations and data access)
* xref:develop:connect/components/caches/about.adoc[`cache`] (for caching intermediate results)

There is one exception: output components can include a `processors:` section. This is not multiple component types. It's an output component with inline processing. See xref:ai-agents:mcp/remote/tool-patterns.adoc#outputs-with-processors[outputs with processors] for examples.

=== Correct structure

Define the component directly at the top level with a `label` and `meta.mcp` block:

.Input component
[,yaml]
----
label: event-reader
redpanda:
  seed_brokers: [ "${secrets.REDPANDA_BROKERS}" ]
  topics: [ "events" ]
  consumer_group: "mcp-reader"

meta:
  mcp:
    enabled: true
    description: "Consume events from Redpanda"
----

.Processor component
[source,yaml]
----
include::example$best-practices/config-examples/correct-processor.yaml[tags=correct-processor]
----

.Output with inline processors
[,yaml]
----
label: publish-with-transform
processors:  # <1>
  - mutation: |
      root = this
      root.published_at = now()
redpanda:
  seed_brokers: [ "${secrets.REDPANDA_BROKERS}" ]
  topic: "processed-events"
meta:
  mcp:
    enabled: true
    description: "Publish data to Redpanda with timestamp"
----
<1> Processors within an output transform data before publishing.

=== Common mistakes

Do not wrap components in `input:` or `output:` blocks:

.Incorrect
[source,yaml]
----
label: incorrect-example
input:
  redpanda:
    seed_brokers: [ "${secrets.REDPANDA_BROKERS}" ]
    topics: [ "events" ]
----

Do not define multiple top-level component types in one file:

.Incorrect
[source,yaml]
----
label: incorrect-example
input:  # <1>
  redpanda: { ... }
processors:  # <1>
  - mutation: { ... }
output:  # <1>
  redpanda: { ... }
----
<1> This configuration has three top-level component types. Each must be a separate tool.
