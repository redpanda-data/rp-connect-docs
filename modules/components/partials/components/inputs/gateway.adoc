= gateway
// tag::single-source[]
:type: input
:status: stable
:categories: [Network]
:description: Receive messages delivered over HTTP.

component_type_dropdown::[]

The `gateway` input listens for incoming HTTP or WebSocket requests and turns each request into a message. It's useful for receiving webhooks, events from third-party systems, or client-published messages over HTTP or WebSocket.

[tabs]
======
Common::
+
--
```yaml
input:
  label: ""
  gateway:
    path: /
    rate_limit: ""

```
--
Advanced::
+
--
```yaml
input:
  label: ""
  gateway:
    path: /
    rate_limit: ""

    sync_response:
      status: "200"
      headers:
        Content-Type: application/octet-stream
      metadata_headers:
        include_prefixes:
          []
        include_patterns:
          []
```
--
======

The field `rate_limit` allows you to specify an optional xref:components:rate_limits/about.adoc[`rate_limit` resource], which will be applied to each HTTP request made and each websocket payload received.

When the rate limit is breached, HTTP requests will have a 429 response returned with a Retry-After header.

== Responses

It's possible to return a response for each message received using xref:guides:sync_responses.adoc[synchronous responses]. When doing so you can customize headers with the `sync_response` field `headers`, which can also use xref:configuration:interpolation.adoc#bloblang-queries[function interpolation] in the value based on the response message contents.

== Metadata

This input adds the following metadata fields to each message:

- `http_server_user_agent`
- `http_server_request_path`
- `http_server_verb`
- `http_server_remote_ip`
- All headers (only first values are taken)
- All query parameters
- All path parameters
- All cookies

You can access these metadata fields using xref:configuration:interpolation.adoc#bloblang-queries[function interpolation].

include::redpanda-connect:components:partial$fields/inputs/gateway.adoc[]

== Examples

=== Ingest a real-time stream of sensor data through a WebSocket

Use the `gateway` input to stream telemetry data from edge devices or browser clients that connect over WebSocket.

Suppose a client connects and sends JSON-encoded sensor readings over WebSocket like this:

[source,json]
----
{ "sensor_id": "temp-001", "value": 22.5, "unit": "C" }
{ "sensor_id": "temp-001", "value": 22.8, "unit": "C" }
{ "sensor_id": "temp-001", "value": 23.1, "unit": "C" }
----

Each line is treated as an individual message by Redpanda Connect.

The following pipeline sets up a `gateway` input to handle these connections and logs each message:

[source,yaml]
----
input:
  label: websocket_sensor_stream
  gateway:
    path: /ws/sensors
    rate_limit: ""

pipeline:
  processors:
    - log:
        level: INFO
        message: "Received reading from ${! json(\"sensor_id\") }: ${! json(\"value\") } ${! json(\"unit\") }"
----

This configuration:

* Accepts WebSocket connections on `/ws/sensors`
* Receives a stream of messages over a single connection
* Logs each message using Bloblang interpolation

You could replace the `log` processor with any downstream output, such as Redpanda or Amazon S3, to persist or analyze the data in real time.

// end::single-source[]