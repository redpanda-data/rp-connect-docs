// This content is autogenerated. Do not edit manually. To override descriptions, use the doc-tools CLI with the --overrides option: https://redpandadata.atlassian.net/wiki/spaces/DOC/pages/1247543314/Generate+reference+docs+for+Redpanda+Connect

== Fields

=== `batch_policy`

Optionally configure a policy to flush buffered messages in batches.

*Type*: `object`

=== `batch_policy.byte_size`

An amount of bytes at which the batch should be flushed. If `0` disables size based batching.

*Type*: `int`

*Default*: `0`

=== `batch_policy.check`

A xref:guides:bloblang/about.adoc[Bloblang query] that should return a boolean value indicating whether a message should end a batch.

*Type*: `string`

*Default*: `""`

[source,yaml]
----
# Examples:
check: this.type == "end_of_transaction"

----

=== `batch_policy.count`

A number of messages at which the batch should be flushed. If `0` disables count based batching.

*Type*: `int`

*Default*: `0`

=== `batch_policy.enabled`

Whether to batch messages as they are flushed.

*Type*: `bool`

*Default*: `false`

=== `batch_policy.period`

A period in which an incomplete batch should be flushed regardless of its size.

*Type*: `string`

*Default*: `""`

[source,yaml]
----
# Examples:
period: 1s
period: 1m
period: 500ms

----

=== `batch_policy.processors[]`

A list of xref:components:processors/about.adoc[processors] to apply to a batch as it is flushed. This allows you to aggregate and archive the batch however you see fit. Please note that all resulting messages are flushed as a single batch, therefore splitting the batch into smaller batches using these processors is a no-op.

*Type*: `processor`

[source,yaml]
----
# Examples:
processors:
  - archive:
      format: concatenate

  - archive:
      format: lines

  - archive:
      format: json_array

----

=== `limit`

The maximum buffer size (in bytes) to allow before applying backpressure upstream.

*Type*: `int`

*Default*: `524288000`


