// This content is autogenerated. Do not edit manually. To override descriptions, use the doc-tools CLI with the --overrides option: https://redpandadata.atlassian.net/wiki/spaces/DOC/pages/1247543314/Generate+reference+docs+for+Redpanda+Connect

== Fields

=== `app_name`

The client application name.

*Type*: `string`

*Default*: `benthos`

=== `auto_replay_nacks`

Whether to automatically replay rejected messages (negative acknowledgements) at the output level. If the cause of rejections is persistent, leaving this option enabled can result in back pressure.

Set `auto_replay_nacks` to `false` to delete rejected messages. Disabling auto replays can greatly improve memory efficiency of high throughput streams as the original shape of the data is discarded immediately upon consumption and mutation.

*Type*: `bool`

*Default*: `true`

=== `checkpoint_cache`

Specify a xref:components:caches/about.adoc[`cache` resource] to store the oplog position for the most recent data update streamed to Redpanda Connect. After a restart, Redpanda Connect can continue processing changes from this position, avoiding the need to reprocess all collection updates.

*Type*: `string`

=== `checkpoint_interval`

The interval between writing checkpoints to the cache.

*Type*: `string`

*Default*: `5s`

=== `checkpoint_key`

The key identifier used to store the oplog position in <<checkpoint_cache,`checkpoint_cache`>>. If you have multiple `mongodb_cdc` inputs sharing the same cache, you can provide an alternative key.

*Type*: `string`

*Default*: `mongodb_cdc_checkpoint`

=== `checkpoint_limit`

The maximum number of in-flight messages emitted from this input. Increasing this limit enables parallel processing, and batching at the output level. To preserve at-least-once guarantees, any given oplog position is not acknowledged until all messages under that offset are delivered.

*Type*: `int`

*Default*: `1000`

=== `collections[]`

A list of collections to stream changes from. Specify each collection name as a separate item.

*Type*: `array`

=== `database`

The name of the MongoDB database to stream changes from.

*Type*: `string`

=== `document_mode`

The mode in which MongoDB emits document changes to Redpanda Connect, specifically updates and deletes.

*Type*: `string`

*Default*: `update_lookup`

[cols="1m,2a"]
|===
|Option |Summary

|partial_update
|In this mode update operations only have a description of the update operation, which follows the following schema:
      {
        "_id": <document_id>,
        "operations": [
          # type == set means that the value was updated like so:
          # root.foo."bar.baz" = "world"
          {"path": ["foo", "bar.baz"], "type": "set", "value":"world"},
          # type == unset means that the value was deleted like so:
          # root.qux = deleted()
          {"path": ["qux"], "type": "unset", "value": null},
          # type == truncatedArray means that the array at that path was truncated to value number of elements
          # root.array = this.array.slice(2)
          {"path": ["array"], "type": "truncatedArray", "value": 2}
        ]
      }
      

|pre_and_post_images
|Uses pre and post image collection to emit the full documents for update and delete operations. To use and configure this mode see the setup steps in the https://www.mongodb.com/docs/manual/changeStreams/#change-streams-with-document-pre--and-post-images[^MongoDB documentation].

|update_lookup
|In this mode insert, replace and update operations have the full document emitted and deletes only have the _id field populated. Documents updates lookup the full document. This corresponds to the updateLookup option, see the https://www.mongodb.com/docs/manual/changeStreams/#std-label-change-streams-updateLookup[^MongoDB documentation] for more information.

|===

=== `json_marshal_mode`

Controls the format used to convert a message from BSON to JSON when it is received by Redpanda Connect.

*Type*: `string`

*Default*: `canonical`

[cols="1m,2a"]
|===
|Option |Summary

|canonical
|A string format that emphasizes type preservation at the expense of readability and interoperability. That is, conversion from canonical to BSON will generally preserve type information except in certain specific cases. 

|relaxed
|A string format that emphasizes readability and interoperability at the expense of type preservation.That is, conversion from relaxed format to BSON can lose type information.

|===

=== `password`

The password to connect to the database.

include::redpanda-connect:components:partial$secret_warning.adoc[]

*Type*: `string`

*Default*: `""`

=== `read_batch_size`

The number of documents to fetch in each message batch from MongoDB.

*Type*: `int`

*Default*: `1000`

=== `read_max_wait`

The maximum duration MongoDB waits to accumulate the <<read_batch_size,`read_batch_size`>> documents on a change stream before returning the batch to Redpanda Connect.

*Type*: `string`

*Default*: `1s`

=== `snapshot_auto_bucket_sharding`

Uses the https://www.mongodb.com/docs/manual/reference/operator/aggregation/bucketAuto/[`$bucketAuto`^] command instead of the default, `$splitVector`, to split the snapshot data into chunks for processing. This is required for environments, such as MongoDB Atlas, where the `$splitVector` command is not available. To enable parallel processing in these environments:

- Set this field to to `true`.
- Set `stream_snapshot` to `true`.
- Increase `snapshot_parallelism` to a value greater than `1`.

*Type*: `bool`

*Default*: `false`

=== `snapshot_parallelism`

Specifies the number of connections to use when reading the initial snapshot from one or more collections. Increase this number to enable parallel processing of the snapshot. 

This feature uses the `$splitVector` command to split snapshot data into chunks for more efficient processing.

This field is only applicable when `stream_snapshot` is set to `true`.

*Type*: `int`

*Default*: `1`

=== `stream_snapshot`

When set to `true`, this input streams a snapshot of all existing data in the source collections before streaming data changes.

*Type*: `bool`

*Default*: `false`

=== `url`

The URL of the target MongoDB server.

*Type*: `string`

[source,yaml]
----
# Examples:
url: mongodb://localhost:27017
----

=== `username`

The username to connect to the database.

*Type*: `string`

*Default*: `""`


