// This content is autogenerated. Do not edit manually. To override descriptions, use the doc-tools CLI with the --overrides option: https://redpandadata.atlassian.net/wiki/spaces/DOC/pages/1247543314/Generate+reference+docs+for+Redpanda+Connect

== Fields

=== `branch_resources[]`

An optional list of xref:components:processors/branch.adoc[`branch` processor] names that are configured as <<resources>>. These resources will be included in the workflow with any branches configured inline within the <<branches, `branches`>> field. The order and parallelism in which branches are executed is automatically resolved based on the mappings of each branch. When using resources with an explicit order it is not necessary to list resources in this field.

ifndef::env-cloud[]
Requires version 3.38.0 or later.
endif::[]

*Type*: `array`

*Default*: `[]`

=== `branches`

An object of named xref:components:processors/branch.adoc[`branch` processors] that make up the workflow. The order and parallelism in which branches are executed can either be made explicit with the field `order`, or if omitted an attempt is made to automatically resolve an ordering based on the mappings of each branch.

*Type*: `object`

*Default*: `{}`

=== `branches.processors[]`

A list of processors to apply to mapped requests. When processing message batches the resulting batch must match the size and ordering of the input batch, therefore filtering, grouping should not be performed within these processors.

*Type*: `processor`

=== `branches.request_map`

A xref:guides:bloblang/about.adoc[Bloblang mapping] that describes how to create a request payload suitable for the child processors of this branch. If left empty then the branch will begin with an exact copy of the origin message (including metadata).

*Type*: `string`

*Default*: `""`

[source,yaml]
----
# Examples:
request_map: |-
  root = {
  	"id": this.doc.id,
  	"content": this.doc.body.text
  }
request_map: |-
  root = if this.type == "foo" {
  	this.foo.request
  } else {
  	deleted()
  }
----

=== `branches.result_map`

A xref:guides:bloblang/about.adoc[Bloblang mapping] that describes how the resulting messages from branched processing should be mapped back into the original payload. If left empty the origin message will remain unchanged (including metadata).

*Type*: `string`

*Default*: `""`

[source,yaml]
----
# Examples:
result_map: |-
  meta foo_code = metadata("code")
  root.foo_result = this
result_map: |-
  meta = metadata()
  root.bar.body = this.body
  root.bar.id = this.user.id
result_map: root.raw_result = content().string()
result_map: |-
  root.enrichments.foo = if metadata("request_failed") != null {
    throw(metadata("request_failed"))
  } else {
    this
  }
result_map: |-
  # Retain only the updated metadata fields which were present in the origin message
  meta = metadata().filter(v -> @.get(v.key) != null)
----

=== `meta_path`

A xref:configuration:field_paths.adoc[dot path] indicating where to store and reference <<structured-metadata, structured metadata>> about the workflow execution.

*Type*: `string`

*Default*: `meta.workflow`

=== `order`

An explicit declaration of branch ordered tiers, which describes the order in which parallel tiers of branches should be executed. Branches should be identified by the name as they are configured in the field `branches`. It's also possible to specify branch processors configured <<resources, as a resource>>.

*Type*: `string`

*Default*: `[]`

[source,yaml]
----
# Examples:
order:
  - - foo
    - bar
  - - baz
order:
  - - foo
  - - bar
  - - baz
----


